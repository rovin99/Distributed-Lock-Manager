[FileCreation] 2025/04/09 01:44:20 Lock state file './data/lock_state.json' not found, assuming initial state.
[FileManager] 2025/04/09 01:44:20 Loaded 0 processed request IDs from log
[LockServer-1] 2025/04/09 01:44:20 Lock state file './data/lock_state.json' not found, assuming initial state.
[FileManager] 2025/04/09 01:44:20 Loaded 0 processed request IDs from log
[FileManager] 2025/04/09 01:44:20 Attempting to recover from write-ahead log
[FileManager] 2025/04/09 01:44:20 Loaded 0 processed request IDs from log
[FileManager] 2025/04/09 01:44:20 Loaded 0 already completed request IDs
[FileManager] 2025/04/09 01:44:20 Found 0 WAL-committed operations to check against processed list
[FileManager] 2025/04/09 01:44:20 WAL recovery check completed: 0 operations replayed, 0 skipped
[FileManager] 2025/04/09 01:44:20 Successfully recovered from write-ahead log
[LockServer-1] 2025/04/09 01:44:20 Connected to peer at localhost:50051
2025/04/09 01:44:20 Starting as secondary server (ID: 1) with peer: localhost:50051
2025/04/09 01:44:20 Waiting for WAL recovery to complete...
2025/04/09 01:44:20 WAL recovery completed successfully
2025/04/09 01:44:20 Verifying server ID uniqueness...
[LockServer-1] 2025/04/09 01:44:20 Starting heartbeat sender with interval=2s, timeout=5s, max failures=3
[LockServer-1] 2025/04/09 01:44:20 Attempt 1: unable to verify peer server ID: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:21 Attempt 2: unable to verify peer server ID: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:22 Heartbeat failed (1/3): rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused"
[LockServer-1] 2025/04/09 01:44:22 Attempt 3: unable to verify peer server ID: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:23 Attempt 4: unable to verify peer server ID: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:24 Heartbeat failed (2/3): rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused"
[LockServer-1] 2025/04/09 01:44:24 Attempt 5: unable to verify peer server ID: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:25 WARNING: Could not verify server ID uniqueness after 5 attempts: unable to verify peer server ID: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused"
[LockServer-1] 2025/04/09 01:44:25 Continuing startup, but be aware that duplicate IDs may cause issues
2025/04/09 01:44:25 Server ID verification completed
2025/04/09 01:44:25 Verifying shared filesystem access...
[LockServer-1] 2025/04/09 01:44:25 Attempt 1: filesystem verification failed - error calling peer: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:26 Heartbeat failed (3/3): rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused"
[LockServer-1] 2025/04/09 01:44:26 Primary is unreachable after 3 attempts, promoting to primary
[LockServer-1] 2025/04/09 01:44:26 Promoting server 1 from secondary to primary
[LockServer-1] 2025/04/09 01:44:26 Entering fencing period for 35s (until 2025-04-09 01:45:01.474208 +0530 IST m=+41.001882126)
[LockServer-1] 2025/04/09 01:44:26 Lock state (Before fencing): holder=-1, expiry=not set
[LockServer-1] 2025/04/09 01:44:26 Scheduling fencing end in 34.9999425s
[LockServer-1] 2025/04/09 01:44:26 Attempt 2: filesystem verification failed - error calling peer: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:27 Attempt 3: filesystem verification failed - error calling peer: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:28 Attempt 4: filesystem verification failed - error calling peer: rpc error: code = Unavailable desc = connection error: desc = "transport: Error while dialing: dial tcp [::1]:50051: connect: connection refused", retrying in 1s
[LockServer-1] 2025/04/09 01:44:29 Shared filesystem verification successful
2025/04/09 01:44:29 Shared filesystem verification completed
2025/04/09 01:44:29 Server listening at [::]:50052
